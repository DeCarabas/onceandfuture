Encoder/Decoder adapted and extended from:

https://golang.org/src/image/jpeg/